---
title: chrome bookmark æ•´ç†ç»Ÿè®¡ç”Ÿæˆè¯äº‘â˜ï¸
date: 2019-06-07 00:19:03
tags: [chrome,python]
categories:
top_img: https://blog-1253523830.cosgz.myqcloud.com/assets/img/20190608153614.png
---

## 0x00

è¦é«˜è€ƒäº†(çœ‹åˆ«äººé«˜è€ƒå˜»å˜»)ï¼Œæœ¬æ¥æƒ³ç€æ•´ç†ä¸€ä¸‹ chrome ä¹¦ç­¾ï¼Œç„¶åä¸€å‘ä¸å¯æ”¶æ‹¾ï¼Œçœ‹åˆ°ä»¥å‰æ”¶è—çš„ä¹¦ç­¾ğŸ”–ï¼Œè§‰å¾—å¾ˆæœ‰æ„æ€ï¼Œç„¶åã€‚ã€‚

<!--more-->

## 0x01

- bookmark ç»“æ„åˆ†æ

é¦–å…ˆè¯»å– bookmark ä¸åŒæ“ä½œç³»ç»Ÿçš„ bookmark åœ¨ä¸åŒçš„è·¯å¾„ï¼Œå¯æµè§ˆè¿™ä¸€æ®µ[ä»£ç ](https://github.com/bdesham/chrome-export/blob/927e0ec273798294d4f06b323794a0ee5b2967eb/export-chrome-bookmarks#L99)

```python
if system() == "Darwin":
    input_filename = expanduser("~/Library/Application Support/Google/Chrome/Default/History")
elif system() == "Linux":
    input_filename = expanduser("~/.config/google-chrome/Default/History")
elif system() == "Windows":
    input_filename = environ["LOCALAPPDATA"] + r"\Google\Chrome\User Data\Default\History"
```

é€šè¿‡ `json.load()` æˆ– `json.loads()` æ–¹æ³•è¯»å‡ºå†…å®¹å¹¶èµ‹å€¼ç»™ contents

```sh
In [35]: contents.keys()                                                      
Out[35]: dict_keys(['checksum', 'roots', 'version'])
```

checksum å’Œ version æˆ‘ä»¬ä¸å…³å¿ƒ

é‡ç‚¹åœ¨ roots é‡Œé¢å­˜æ”¾ç€ chrome æµè§ˆå™¨çš„æ‰€æœ‰ä¹¦ç­¾

```sh
In [37]: contents['roots'].keys()                                             
Out[37]: dict_keys(['bookmark_bar', 'other', 'sync_transaction_version', 'synced'])
```

å…¶ä¸­ bookmark_bar å’Œ other åˆ†åˆ«è¡¨ç¤ºä¹¦ç­¾æ å’Œå…¶ä»–ä¹¦ç­¾ å±äºåŒçº§äº‹ç‰©

```sh
In [40]: contents['roots']['bookmark_bar']['name']                            
Out[40]: 'ä¹¦ç­¾æ '

In [41]: contents['roots']['other']['name']                                   
Out[41]: 'å…¶ä»–ä¹¦ç­¾'

In [42]: contents['roots']['bookmark_bar'].keys()                             
Out[42]: dict_keys(['children', 'date_added', 'date_modified', 'id', 'name', 'sync_transaction_version', 'type'])

In [43]: contents['roots']['other'].keys()                                    
Out[43]: dict_keys(['children', 'date_added', 'date_modified', 'id', 'name', 'sync_transaction_version', 'type'])
```

å…¶ä¸­ï¼Œchildren ä¸‹é¢æ˜¯ä¸€ä¸ª list è€Œ list ä¸­çš„æ¯ä¸ªå…ƒç´ å…¶å®æ˜¯ä¸€ä¸ª dict è¡¨ç¤ºå…·ä½“ä¹¦ç­¾é¡¹ç›®

æ¯ä¸ªå…·ä½“çš„ä¹¦ç­¾é¡¹ç›®æ‹¥æœ‰çš„ key

```sh
date_added
id
meta_info
name
sync_transaction_version
type
url
```

æ˜ç™½äº†åŸç†å°± OK äº†ï¼Œå…·ä½“çœ‹ `code/bookmark.py`

## 0x02

- jieba åˆ†è¯

æ²¡å•¥å¥½è¯´çš„ï¼Œæˆ‘ä¹Ÿä¸ä¼šï¼Œæ ¹æ®å®˜æ–¹æ ·ä¾‹ç…§ç€å†™å°±è¡Œã€‚

## 0x03

- wordcloud ç”Ÿæˆè¯äº‘å›¾

`from wordcloud import WordCloud`

ç‚¹è¿›å»çœ‹è¿™ä¸ªç±»çš„ä¸€äº›é…ç½®å³å¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æœç´¢å¼•æ“æŸ¥çœ‹ä¸€äº›åˆ«äººå†™çš„ä¾‹å­ã€‚

```python
bookmark_cloud = WordCloud(font_path=fontpath,
                            background_color="white",
                            max_words=None,
                            max_font_size=248,
                            random_state=42,
                            width=2560, height=1600
                            )
bookmark_cloud.generate_from_frequencies(contents) # éœ€è¦æ³¨æ„çš„æ˜¯ è¿™é‡Œä¼ å…¥çš„ contents æ˜¯ä¸€ä¸ªå­—å…¸ dict
```

## 0x04 Development

```sh
# https://github.com/ronething/bookmark
git clone [repo] && cd [repo]
# å°† Bookmarks ä¹¦ç­¾æ–‡ä»¶æ”¾ç½®äºé¡¹ç›®æ ¹ç›®å½•
pipenv install # å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… pipenv é€šè¿‡ pip(3) install pipenv è§£å†³
pipenv run python code/summary.py
```

## 0x05

![æœ€ç»ˆæ•ˆæœ](https://blog-1253523830.cosgz.myqcloud.com/assets/img/bookmark.png)

## 0x06

å°é¢å‡ºå¤„ï¼šhttps://www.pixiv.net/member_illust.php?mode=medium&illust_id=71408314

å‚è€ƒèµ„æ–™ï¼š

- [chrome-export](https://github.com/bdesham/chrome-export)
- [jieba](https://github.com/fxsjy/jieba)
- [wordcloud](https://github.com/amueller/word_cloud)